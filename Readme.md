# cache-service

[![CircleCI](https://circleci.com/gh/mdevilliers/cache-service.svg?style=svg)](https://circleci.com/gh/mdevilliers/cache-service)

POC of a caching service with a GRPC API using Redis as a backing store.

### Local developement

To run a local copy of redis :

```
make hack_local_redis
```

To run the local server :

```
make build
./build/bin/cache-service-linux-amd64 server
```

To run the client against the local server :

```
./build/bin/cache-service-linux-amd64 client --address=0.0.0.0:3000
```

To update the generated protobuf files :

```
make install_proto_tools
make proto
```

To generate the mocks :

```
make mocks
```

### Local K8s deployment

Install Kind using the instructions [here](/hack/kind)

```
export KUBECONFIG="$(kind get kubeconfig-path --name="kind")"
make hack_image_deploy_local
```

To run the client against K8s :

```
make build
kubectl port-forward svc/cache-service-svc-v1 3000:8080
./build/bin/cache-service-linux-amd64 client --address=0.0.0.0:3000
```

Generated by [golang-k8s-template](https://github.com/mdevilliers/golang-k8s-template)
